一、用户管理模块

### 1.1 用户注册

- 请求路径：`POST /user/register`
- 请求参数：

```json
{
    "username": "string",     // 用户名
    "password": "string",     // 密码
    "email": "string",        // 邮箱
    "role": 1,               // 角色：1-学生，2-教师
    "realName": "string"     // 真实姓名
}
```

- 响应数据：

```json
{
    "code": 200,
    "message": "注册成功",
    "data": {
        "id": 1,
        "username": "string",
        "email": "string",
        "role": 1,
        "realName": "string"
    }
}
```

### 1.2 用户登录

- 请求路径：`POST /user/login`
- 请求参数：

```json
{
    "username": "string",     // 用户名
    "password": "string"      // 密码
}
```

- 响应数据：

```json
{
    "code": 200,
    "message": "登录成功",
    "data": {
        "token": "string",    // JWT Token
        "userInfo": {
            "id": 1,
            "username": "string",
            "role": 1,
            "realName": "string"
        }
    }
}
```

### 1.3 获取用户信息

- 请求路径：`GET /user/info`
- 请求头：需要携带token
- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "id": 1,
        "username": "string",
        "email": "string",
        "role": 1,
        "realName": "string",
        "avatar": "string"
    }
}
```

### 1.4 修改用户信息

- 请求路径：`PUT /user/info`
- 请求头：需要携带token
- 请求参数：

```json
{
    "email": "string",        // 可选
    "realName": "string",     // 可选
    "avatar": "string"        // 可选
}
```

- 响应数据：

```json
{
    "code": 200,
    "message": "修改成功",
    "data": null
}
```

## 二、课程管理模块

### 2.1 教师端接口

#### 2.1.1 创建课程

- 请求路径：`POST /course`
- 请求头：需要携带token，需要教师权限
- 请求参数：

```json
{
    "title": "string",           // 课程标题
    "description": "string",     // 课程描述
    "coverImage": "string"       // 课程封面图片URL
}
```

- 响应数据：

```json
{
    "code": 200,
    "message": "创建成功",
    "data": {
        "id": 1,
        "title": "string",
        "description": "string",
        "coverImage": "string",
        "courseCode": "string",  // 系统生成的课程码
        "teacherId": 1,
        "status": 1
    }
}
```

#### 2.1.2 上传课程视频

- 请求路径：`POST /course/video`
- 请求头：需要携带token，需要教师权限
- 请求参数：multipart/form-data

```
courseId: number       // 课程ID
title: string         // 视频标题
description: string   // 视频描述
video: file          // 视频文件
orderNum: number     // 排序号
```

- 响应数据：

```json
{
    "code": 200,
    "message": "上传成功",
    "data": {
        "id": 1,
        "courseId": 1,
        "title": "string",
        "description": "string",
        "url": "string",
        "duration": 3600,
        "orderNum": 1
    }
}
```

#### 2.1.3 获取教师课程列表

- 请求路径：`GET /course/teacher`

```
page: number     // 页码，默认1
size: number     // 每页大小，默认10
```

- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "total": 100,
        "list": [
            {
                "id": 1,
                "title": "string",
                "description": "string",
                "coverImage": "string",
                "courseCode": "string",
                "status": 1,
                "studentCount": 50
            }
        ]
    }
}
```

### 2.2 学生端接口

#### 2.2.1 加入课程

- 请求路径：`POST /course/join`
- 请求头：需要携带token，需要学生权限
- 请求参数：

```json
{
    "courseCode": "string"    // 课程码
}
```

- 响应数据：

```json
{
    "code": 200,
    "message": "加入成功",
    "data": {
        "courseId": 1,
        "title": "string",
        "teacherName": "string"
    }
}
```

#### 2.2.2 获取学生课程列表

- 请求路径：`GET /course/student`
- 请求头：需要携带token，需要学生权限
- 请求参数：

```
page: number     // 页码，默认1
size: number     // 每页大小，默认10
```

- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "total": 100,
        "list": [
            {
                "id": 1,
                "title": "string",
                "description": "string",
                "coverImage": "string",
                "teacherName": "string",
                "progress": 60    // 学习进度，百分比
            }
        ]
    }
}
```

## 三、作业管理模块

### 3.1 教师端接口

#### 3.1.1 创建作业

- 请求路径：`POST /homework`
- 请求头：需要携带token，需要教师权限
- 请求参数：

```json
{
    "courseId": 1,
    "title": "string",
    "description": "string",
    "type": 1,              // 1-选择题，2-编程题
    "startTime": "string",  // yyyy-MM-dd HH:mm:ss
    "endTime": "string",    // yyyy-MM-dd HH:mm:ss
    "questions": [          // 根据type不同，结构不同
        {
            // 选择题
            "question": "string",
            "options": ["A", "B", "C", "D"],
            "answer": "A",
            "score": 10
        },
        {
            // 编程题
            "title": "string",
            "description": "string",
            "inputDescription": "string",
            "outputDescription": "string",
            "testCases": [
                {
                    "input": "string",
                    "output": "string"
                }
            ],
            "score": 20
        }
    ]
}
```

- 响应数据：

```json
{
    "code": 200,
    "message": "创建成功",
    "data": {
        "homeworkId": 1
    }
}
```

#### 3.1.2 获取作业提交列表

- 请求路径：`GET /homework/{homeworkId}/submissions`
- 请求头：需要携带token，需要教师权限
- 请求参数：

```
page: number     // 页码，默认1
size: number     // 每页大小，默认10
```

- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "total": 100,
        "list": [
            {
                "id": 1,
                "studentId": 1,
                "studentName": "string",
                "status": 2,        // 1-进行中，2-已提交，3-已批改
                "score": 80,
                "submitTime": "string"
            }
        ]
    }
}
```

### 3.2 学生端接口

#### 3.2.1 获取作业列表

- 请求路径：`GET /homework/student`
- 请求头：需要携带token，需要学生权限
- 请求参数：

```
courseId: number  // 课程ID
status: number    // 可选，1-未完成，2-已完成
page: number      // 页码，默认1
size: number      // 每页大小，默认10
```

- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "total": 100,
        "list": [
            {
                "id": 1,
                "title": "string",
                "type": 1,
                "startTime": "string",
                "endTime": "string",
                "status": 1,        // 1-未开始，2-进行中，3-已截止
                "submitStatus": 1,   // 1-未提交，2-已提交，3-已批改
                "score": 80
            }
        ]
    }
}
```

#### 3.2.2 提交作业

- 请求路径：`POST /homework/{homeworkId}/submit`
- 请求头：需要携带token，需要学生权限
- 请求参数：

```json
{
    "answers": [          // 根据作业类型不同，结构不同
        {
            // 选择题
            "questionId": 1,
            "answer": "A"
        },
        {
            // 编程题
            "questionId": 2,
            "code": "string",
            "language": "java"
        }
    ]
}
```

- 响应数据：

```json
{
    "code": 200,
    "message": "提交成功",
    "data": {
        "submissionId": 1
    }
}
```

## 四、AI辅助学习模块

### 4.1 视频学习问答

- 请求路径：`POST /ai/qa`
- 请求头：需要携带token
- 请求参数：

```json
{
    "videoId": 1,
    "question": "string"
}
```

- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "answer": "string",
        "relatedPoints": [    // 相关知识点
            {
                "title": "string",
                "description": "string"
            }
        ]
    }
}
```

### 4.2 获取题目解析

- 请求路径：`POST /ai/analysis`
- 请求头：需要携带token
- 请求参数：

```json
{
    "questionId": 1,
    "type": 1        // 1-选择题，2-编程题
}
```

- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "analysis": "string",     // 解题思路
        "keyPoints": [           // 重点知识点
            {
                "title": "string",
                "description": "string"
            }
        ],
        "similarQuestions": [    // 相似题目
            {
                "id": 2,
                "title": "string",
                "difficulty": 2   // 1-简单，2-中等，3-困难
            }
        ]
    }
}
```

## 五、学情分析模块

### 5.1 教师端接口

#### 5.1.1 获取课程学习数据

- 请求路径：`GET /analysis/course/{courseId}`
- 请求头：需要携带token，需要教师权限
- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "studentCount": 100,           // 学生总数
        "activeStudentCount": 80,      // 活跃学生数
        "averageProgress": 60,         // 平均学习进度
        "homeworkStats": {             // 作业统计
            "total": 10,
            "averageScore": 85,
            "passRate": 0.9
        },
        "videoStats": {                // 视频学习统计
            "totalDuration": 3600,     // 总时长（秒）
            "averageWatchTime": 2400,  // 平均观看时长
            "completionRate": 0.8      // 完成率
        }
    }
}
```

#### 5.1.2 获取学生学习报告

- 请求路径：`GET /analysis/student/{studentId}`
- 请求头：需要携带token，需要教师权限
- 请求参数：

```
courseId: number    // 课程ID
type: number       // 报告类型：1-周报，2-月报，3-课程总结
```

- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "studentInfo": {
            "id": 1,
            "name": "string",
            "avatar": "string"
        },
        "learningData": {
            "progress": 60,            // 学习进度
            "totalTime": 3600,         // 学习时长
            "homeworkScore": 85,       // 作业得分
            "ranking": 10              // 班级排名
        },
        "analysis": {
            "strengths": ["string"],   // 优势
            "weaknesses": ["string"],  // 不足
            "suggestions": ["string"]  // 建议
        }
    }
}
```

### 5.2 学生端接口

#### 5.2.1 获取个人学习数据

- 请求路径：`GET /analysis/personal`
- 请求头：需要携带token，需要学生权限
- 请求参数：

```
courseId: number    // 课程ID
```

- 响应数据：

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "overview": {
            "progress": 60,            // 学习进度
            "totalTime": 3600,         // 学习时长
            "homeworkScore": 85,       // 平均作业得分
            "ranking": 10              // 班级排名
        },
        "weeklyStats": [              // 每周学习统计
            {
                "week": "2024-W10",
                "studyTime": 1800,     // 学习时长
                "completedTasks": 5    // 完成任务数
            }
        ],
        "knowledge": {                // 知识掌握情况
            "mastered": ["string"],   // 已掌握
            "learning": ["string"],   // 学习中
            "weak": ["string"]        // 薄弱项
        }
    }
}
```

## 六、文件上传接口

### 6.1 上传图片

- 请求路径：`POST /file/image`
- 请求头：需要携带token
- 请求参数：multipart/form-data

```
file: file     // 图片文件
type: string   // 用途：avatar-头像，cover-课程封面
```

- 响应数据：

```json
{
    "code": 200,
    "message": "上传成功",
    "data": {
        "url": "string"    // 图片访问URL
    }
}
```

### 6.2 上传视频

- 请求路径：`POST /file/video`
- 请求头：需要携带token，需要教师权限
- 请求参数：multipart/form-data

```
file: file        // 视频文件
courseId: number  // 课程ID
```

- 响应数据：

```json
{
    "code": 200,
    "message": "上传成功",
    "data": {
        "url": "string",      // 视频访问URL
        "duration": 3600      // 视频时长（秒）
    }
}
```

GET /api/course/{courseId}/tree：获取单个课程的完整目录树。
POST /api/course/chapter：新增/修改目录节点（章或节）。
DELETE /api/course/chapter/{chapterId}：删除目录节点。
POST /api/course/video/upload-token：获取七牛云上传凭证（这是与对象存储交互的安全方式）。
