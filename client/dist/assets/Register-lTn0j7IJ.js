import{_ as R}from"./login-illustration-CGKr_K8j.js";import{_ as q,u as C,r as w,a as B,c as I,b as r,d as u,e as d,w as a,f as S,o as $,h as p,l as h,E as v}from"./index-BDXlMFXp.js";const F={class:"register-container"},k={class:"image-container"},z={__name:"Register",setup(D){const V=async t=>{await h(t)},b={background:{color:{value:"transparent"}},particles:{number:{value:50},color:{value:"#888888"},shape:{type:"circle"},opacity:{value:.5},size:{value:2},links:{enable:!0,color:"#cccccc",distance:150,opacity:.4,width:1},move:{enable:!0,speed:3}},interactivity:{events:{onHover:{enable:!0,mode:"grab"},onClick:{enable:!0,mode:"push"}}}},y=S(),f=C(),m=w(null),c=w(!1),o=B({username:"",password:"",confirmPassword:"",email:"",role:1,realName:""}),E={username:[{required:!0,validator:async(t,e,l)=>{if(e==="")l(new Error("请输入用户名"));else try{await f.checkUsername(e)?l(new Error("用户名已存在")):l()}catch{l(new Error("验证用户名失败"))}},trigger:"blur"}],password:[{required:!0,validator:(t,e,l)=>{var n;e===""?l(new Error("请输入密码")):(o.confirmPassword!==""&&((n=m.value)==null||n.validateField("confirmPassword")),l())},trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],confirmPassword:[{required:!0,validator:(t,e,l)=>{e===""?l(new Error("请再次输入密码")):e!==o.password?l(new Error("两次输入密码不一致")):l()},trigger:"blur"}],email:[{required:!0,validator:async(t,e,l)=>{if(e==="")l(new Error("请输入邮箱"));else if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))l(new Error("请输入有效的邮箱地址"));else try{await f.checkEmail(e)?l(new Error("邮箱已被使用")):l()}catch{l(new Error("验证邮箱失败"))}},trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}]},P=async()=>{if(m.value)try{await m.value.validate(),c.value=!0;const{confirmPassword:t,...e}=o;await f.register(e),v.success("注册成功"),y.push("/login")}catch(t){t.message&&v.error(t.message)}finally{c.value=!1}};return(t,e)=>{const l=d("Particles"),n=d("el-input"),i=d("el-form-item"),g=d("el-radio"),U=d("el-radio-group"),_=d("el-button"),x=d("el-form"),N=d("el-card");return $(),I("div",F,[r(l,{id:"tsparticles",class:"register-particles",particlesInit:V,options:b}),u("div",k,[e[12]||(e[12]=u("img",{src:R,alt:"背景图",class:"center-image"},null,-1)),r(N,{class:"register-card"},{header:a(()=>e[7]||(e[7]=[u("div",{class:"card-header"},[u("h2",null,"创建您的账号"),u("p",null,"开启您的学习之旅")],-1)])),default:a(()=>[r(x,{ref_key:"formRef",ref:m,model:o,rules:E,"label-width":"80px","status-icon":""},{default:a(()=>[r(i,{label:"用户名",prop:"username"},{default:a(()=>[r(n,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),r(i,{label:"密码",prop:"password"},{default:a(()=>[r(n,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),r(i,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[r(n,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=s=>o.confirmPassword=s),type:"password",placeholder:"请确认密码","show-password":""},null,8,["modelValue"])]),_:1}),r(i,{label:"邮箱",prop:"email"},{default:a(()=>[r(n,{modelValue:o.email,"onUpdate:modelValue":e[3]||(e[3]=s=>o.email=s),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),r(i,{label:"角色",prop:"role"},{default:a(()=>[r(U,{modelValue:o.role,"onUpdate:modelValue":e[4]||(e[4]=s=>o.role=s)},{default:a(()=>[r(g,{label:1},{default:a(()=>e[8]||(e[8]=[p("学生")])),_:1,__:[8]}),r(g,{label:2},{default:a(()=>e[9]||(e[9]=[p("教师")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1}),r(i,{label:"真实姓名",prop:"realName"},{default:a(()=>[r(n,{modelValue:o.realName,"onUpdate:modelValue":e[5]||(e[5]=s=>o.realName=s),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),r(i,null,{default:a(()=>[r(_,{type:"primary",onClick:P,loading:c.value,class:"login-btn"},{default:a(()=>e[10]||(e[10]=[p(" 注册 ")])),_:1,__:[10]},8,["loading"])]),_:1}),r(i,{class:"register-link"},{default:a(()=>[r(_,{text:"",onClick:e[6]||(e[6]=s=>t.$router.push("/login"))},{default:a(()=>e[11]||(e[11]=[p(" 已有账号？返回登录 ")])),_:1,__:[11]})]),_:1})]),_:1},8,["model"])]),_:1})])])}}},G=q(z,[["__scopeId","data-v-d19a88a9"]]);export{G as default};
